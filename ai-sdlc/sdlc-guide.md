---
description: AI-Native SDLC 工作流速查
---

# AI-Native SDLC 速查指南

## 六个阶段

```
阶段 0：地基（持续进行）
└─> 维护 L1/L2，确保基础设施就绪

阶段 1：需求与上下文映射
└─> 定义验收标准，映射到 L1/L2，识别风险
    └─> 输出：清晰的需求 + 上下文映射

阶段 2：战略规划 ⭐ 关键
└─> 先接口后实现，制定详细计划
    └─> AI：/agent-p [task description]
    └─> 人类检查点：人工计划审查（HPR）
    └─> 输出：01_PLAN.md + 03_CHECKLIST.md

阶段 3：实施循环
└─> 注入上下文 -> 微步骤 -> 即时验证
    └─> AI：/load-context [task-id]，/agent-i [step]
    └─> 人类：引导、审阅、维护上下文
    └─> 输出：可运行代码 + 更新后的 02_CONTEXT_LOG.md

阶段 4：验证 ⭐ 关键
└─> AI 自审 -> 自动化测试 -> 人工审查
    └─> AI：/agent-r [files]
    └─> 人类检查点：代码审查（HCR）
    └─> 输出：经验证、可投产的代码

阶段 5：部署与结晶
└─> 部署 + 提炼可复用知识
    └─> AI：/agent-c crystallize
    └─> 输出：更新的 L1/L2、已部署系统
```

## 知识层级

```
L1：Playbook（全局作战手册）
├─> 位置：/AI_KNOWLEDGE/PLAYBOOK/
├─> 目的：“HOW”——组织的游戏规则
├─> 示例：ROS2_BEST_PRACTICES.md、CODING_STYLE.md
└─> 何时更新：当多个任务出现可复用模式

L2：Blueprint（系统蓝图）
├─> 位置：/src/[package]/（按 ROS 包）
├─> 目的：“WHAT/WHERE”——系统结构与接口
├─> 关键文件：ARCHITECTURE.md、API_INTERFACE.md
└─> 何时更新：当系统设计发生变化

L3：Journal（任务日志）
├─> 位置：/DEV_TRACKING/ACTIVE/[TASK_ID]/
├─> 目的：“发生了什么 / 为什么”——任务上下文与决策
├─> 文件：01_PLAN.md、02_CONTEXT_LOG.md、03_CHECKLIST.md
└─> 何时更新：任务执行过程中持续更新
```

## 命令速查

### 新任务起步
```bash
/new-task [task-name]           # 初始化任务结构
/agent-p [task-description]     # 生成实施计划
# [执行 HPR - 人工计划软件审查]
/load-context [task-id]         # 加载上下文开始工作
```

### 实施阶段
```bash
/load-context [task-id]         # 如需，重新加载上下文
/agent-i [specific-step]        # 执行特定实施步骤
/agent-c update-log             # 更新上下文日志
```

### 代码审查
```bash
/agent-r [files-to-review]      # AI 自审
# [执行 HCR - 人工代码审查]
```

### 任务收尾
```bash
/agent-c crystallize            # 提炼可复用知识
# 将任务归档至 /DEV_TRACKING/ARCHIVE/
```

## Agent 小队

**Agent-P（规划者）** 🧠
- 生成战略实施计划
- 输出：01_PLAN.md、03_CHECKLIST.md
- 需要：人类审批（HPR）

**Agent-I（实施者）** ⚙️
- 按 L1/L2/L3 规范执行代码
- 行为：严格遵循计划，不得即兴
- 汇报：完成情况与自检

**Agent-R（审查者）** 🛡️
- 依据所有标准审计代码
- 关注：L3 目标、L2 架构、L1 实践
- 对安全问题零容忍

**Agent-C（上下文管理者）** 📝
- 维护：02_CONTEXT_LOG.md
- 结晶：将任务知识写入 L1/L2
- 保障：跨会话的上下文可持续

## 人类检查点

### HPR（人工计划审查）- 阶段 2
**目的**：注入战略智慧，确保安全

**审查重点**：
- [ ] 计划能达成需求
- [ ] 接口定义完整（L2）
- [ ] 考虑安全性
- [ ] 无架构违规
- [ ] 易维护

### HCR（人工代码审查）- 阶段 4
**目的**：验证业务逻辑与安全路径

**审查重点**：
- [ ] Agent-R 发现已解决
- [ ] 业务逻辑正确
- [ ] 并发处理得当
- [ ] 安全关键路径已验证
- [ ] 性能可接受

## 核心原则

1. **把上下文当资产** 💎
   - L1/L2 是竞争力
   - 投入高质量文档
   - 让知识复利

2. **规划为王** 👑
   - AI 负责执行，规划需靠人类
   - 糟糕的计划 = 糟糕的结果
   - 关键任务必须 HPR

3. **显性优先** 📖
   - 全部记录清楚
   - 不留隐性假设
   - AI 与人类使用同一来源

4. **Zero Errors Left Behind** ✨
   - 立即修复错误
   - 用自动化守护
   - 保持代码库干净

5. **人类为仲裁者** ⚖️
   - 人类注入智慧
   - 人类确保安全
   - 人类管理知识资本

## 常见模式

### 模式：先接口后实现
```
1. 先定义 L2/API_INTERFACE.md
2. 获得架构师批准
3. 按契约实现
4. 集成自然顺畅
```

### 模式：微步骤执行
```
1. 加载上下文：/load-context [task-id]
2. 执行 1-2 个清单项：/agent-i [step]
3. 人类即时审阅输出
4. 更新日志：/agent-c update-log
5. 重复
```

### 模式：知识结晶
```
1. 完成任务
2. 归档至 /DEV_TRACKING/ARCHIVE/
3. 分析：/agent-c crystallize
4. 人类审阅提案
5. 将新模式写入 L1/L2
6. 让后续任务直接受益
```

## 需要避免的反模式

❌ **凭感觉编码**：未查 L1/L2/L3 就开工
❌ **跳过规划**：未做 HPR 就实施
❌ **上下文流失**：未定期更新 02_CONTEXT_LOG.md
❌ **浪费知识**：完成后不做结晶
❌ **静默失败**：忽视错误或警告
❌ **假定同步**：指望前一会话的上下文仍然有效

## 紧急流程

### 上下文丢失
```bash
/load-context [task-id]    # 重新加载全部 L1/L2/L3
# 阅读 02_CONTEXT_LOG.md 找“下一步”
```

### 计划失效
```bash
# 立刻停止实施
# 在 02_CONTEXT_LOG.md 记录问题
# 用更新需求重新运行 Agent-P
# 重新进行 HPR
```

### 安全隐患
```bash
# 立即停止
# 记录隐患
# 升级给人类架构师
# 未解决前不得继续
```

## 成功指标

**任务层面**：
- 所有验收标准达成
- 无关键审查问题
- 测试全数通过
- 上下文记录完整

**系统层面**：
- L1/L2 覆盖度提升
- 任务完成时间下降
- 审查发现逐渐减少
- 知识复用率提升

---

**牢记**：这是一个伪装成开发流程的知识管理系统。目标不仅是写软件，更是沉淀可复用的组织智慧。

**复利效应**：每个记录良好的任务都会让下一个任务更容易。10 个任务后你拥有强大的手册；100 个任务后，你拥有势不可挡的开发机器。
