# RealSense + Robotic Arm Integration Suite

## 项目简介
该项目旨在构建一套完整的 RealSense 深度相机与机械臂联动方案，通过统一的应用服务接口在局域网中对外暴露能力，便于上层 App 或业务系统调用，实现从视觉感知到执行控制的闭环。

## 运行环境
- Ubuntu 22.04（LTS）作为基础操作系统，统一驱动与依赖版本。
- ROS 2 Humble 作为机器人中间件，提供节点管理、话题/服务/动作通信、TF 广播与调试工具链。

## Node 拆分
| 模块 | Node | 描述 |
| --- | --- | --- |
| 相机 | `realsense2_camera` | RealSense 官方驱动节点，管理相机硬件、内参发布与话题输出。 |
| 视觉 | `object_perception_2d_node` | 负责 2D Mask 与物体识别/记忆，输出语义分割或检测结果。 |
|  | `vision_3d_mapper_node` | 将 2D Mask 投影到 3D 点云，生成世界/相机坐标系下的目标姿态。 |
| 机械臂 | `robot_driver_node` | 读写机械臂控制器：实时采集关节位置/速度/力矩，并对目标关节位姿做插值、限速与安全检查后下发。 |
|  | `move_controller_group_node` | 根据 3D 感知结果生成轨迹规划，负责逆解、避障与时序控制。 |
|  | `robot_desc_node` | 发布 URDF 与 Mesh 资源，供 RViz/MoveIt 等可视化与规划模块消费。 |
|  | `robot_skill_node` | 封装常用动作集（抓取、旋转采样等），对上层提供技能级指令。 |
| TF | `static_tf_config` (Action) | 生成手眼标定与全局静态坐标配置，保障多坐标系一致性。 |
|  | `static_tf_publisher` (Action) | 广播 `/tf` 与 `/tf_static`，同步机器人各坐标系给可视化、导航、控制栈。 |
| App | `robot_server` | 面向局域网对外的服务节点，处理任务下发、状态查询、告警通知等 API。 |
|  | `robot_web` | Web 可视化/管理节点，为前端 App 提供实时状态与交互界面。 |
| 可视化 | `foxglove_bridge` | 与 Foxglove Studio 对接，推送话题/服务给 Web 可视化客户端。 |
|  | `rviz2` | RViz2 实例节点，用于调试、场景复现与演示。 |

## 核心目标
1. **多模态感知**：利用 RealSense 提供 RGB-D 数据，完成场景建模、目标检测与位姿估计。
2. **联动控制**：将感知结果实时转化为机械臂的轨迹规划与动作执行，确保安全、稳定、低延迟。
3. **服务化接口**：封装标准化的局域网 API（REST/gRPC/WebSocket 等），供外部 App 调用，实现状态获取与任务下发。

## 系统组成
- **传感层**：RealSense D 系列或 L 系列摄像头，负责数据采集与标定。
- **控制层**：机械臂控制器与运动规划模块（可结合 MoveIt、ROS 2 控制栈）。
- **中间件**：数据同步、消息队列、状态机，协调视觉与控制节奏。
- **服务层**：统一接口网关，提供身份认证、任务管理、日志监控等能力。

## 重点工作内容
1. **硬件对接与标定**
   - 相机内参/外参标定、机械臂基座与末端坐标系对齐。
   - 延迟与抖动测试，确保测量数据可靠。
2. **视觉算法与数据处理**
   - 深度图滤波、点云裁剪、目标识别算法评估。
   - 位姿解算与抓取点生成。
3. **运动规划与控制**
   - 机械臂逆解、轨迹平滑、避障策略。
   - 动作执行回馈闭环及异常安全策略。
4. **局域网服务接口**
   - API 设计（任务提交、状态查询、告警上报等）。
   - 权限模型、数据序列化格式、接口测试。
5. **系统集成与验证**
   - 联调脚本、自动化测试用例、性能基准。
   - 典型应用场景 Demo（如抓取、分拣、装配）。

## 初步里程碑
- **阶段 1：环境准备** – 硬件连线、驱动安装、基础标定。
- **阶段 2：感知与控制联调** – 搭建视觉管线，完成机械臂基本动作跟随。
- **阶段 3：服务化封装** – 发布局域网 API，支持任务管理与监控。
- **阶段 4：可靠性加固** – 完成压力测试、日志与告警体系、交付文档。

## 交付物
- 完整的系统架构与通信协议文档
- 可复现的部署与运行脚本
- 局域网 API 说明书与示例客户端
- Demo 级应用案例（含视频或录屏）

若有额外需求（如跨平台支持、云端同步、视觉算法扩展），请在需求评审阶段确认并统筹进度。
