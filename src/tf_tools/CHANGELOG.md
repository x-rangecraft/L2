# âœ… é‡å‘½åå®Œæˆ - æœ€ç»ˆç‰ˆæœ¬

## ğŸ“ æ›´æ”¹æ€»ç»“

### ä¸»è¦å˜æ›´ï¼šé‡å‘½åå…¥å£è„šæœ¬

**åŸåç§°**ï¼š`static_tf_config_publish.sh`
**æ–°åç§°**ï¼š`tf_publisher.sh`

**åŸå› **ï¼šè„šæœ¬ç°åœ¨åŒæ—¶ç®¡ç†é™æ€TFå’ŒåŠ¨æ€TFï¼ŒåŸåç§°å®¹æ˜“è¯¯å¯¼ï¼Œæ–°åç§°æ›´å‡†ç¡®åæ˜ åŠŸèƒ½ã€‚

## ğŸ“ æœ€ç»ˆç›®å½•ç»“æ„

```
L2/src/tf_tools/
â”œâ”€â”€ README.md                       # ğŸ“˜ ç”¨æˆ·æ–‡æ¡£
â”œâ”€â”€ IMPLEMENTATION.md               # ğŸ”§ å®ç°ç»†èŠ‚
â”œâ”€â”€ STRUCTURE.md                    # ğŸ“‹ ç»“æ„è¯´æ˜
â”œâ”€â”€ tf.md                           # ğŸ“„ åŸå§‹æ–‡æ¡£
â”œâ”€â”€ check_environment.sh            # âœ… ç¯å¢ƒæ£€æŸ¥
â”‚
â”œâ”€â”€ static_tf_config_build.sh       # ğŸ”§ é™æ€TFé…ç½®ç”Ÿæˆ
â”œâ”€â”€ static_tf_config.yaml           # âš™ï¸  é™æ€TFé…ç½®æ–‡ä»¶
â”œâ”€â”€ tf_publisher.sh                 # â­ ç»Ÿä¸€å¯åŠ¨å…¥å£ï¼ˆä¸»å…¥å£ï¼‰
â”‚
â””â”€â”€ src/                            # ğŸ“‚ ä»£ç å®ç°ç›®å½•
    â”œâ”€â”€ dynamic_tf_publish.sh       # åŠ¨æ€TFå¯åŠ¨è„šæœ¬
    â””â”€â”€ robot_tf_publisher.py       # åŠ¨æ€TFæ ¸å¿ƒèŠ‚ç‚¹ (11KB, 350è¡Œ)

L2/log/tf_tools/
â””â”€â”€ robot_tf_publisher.log          # è¿è¡Œæ—¥å¿—
```

## ğŸš€ ä½¿ç”¨æ–¹å¼

### ç»Ÿä¸€å…¥å£ï¼š`tf_publisher.sh`

```bash
# å‰å°è¿è¡Œï¼ˆè°ƒè¯•ï¼‰
./src/tf_tools/tf_publisher.sh

# åå°è¿è¡Œï¼ˆç”Ÿäº§ï¼‰
./src/tf_tools/tf_publisher.sh --daemon

# æŸ¥çœ‹çŠ¶æ€
./src/tf_tools/tf_publisher.sh --status

# åœæ­¢æœåŠ¡
./src/tf_tools/tf_publisher.sh --stop

# ä»…åŠ¨æ€TFï¼ˆæœºå™¨äººå…³èŠ‚ï¼‰
./src/tf_tools/tf_publisher.sh --daemon --dynamic-only

# ä»…é™æ€TFï¼ˆworldåæ ‡ç³»ï¼‰
./src/tf_tools/tf_publisher.sh --daemon --static-only
```

### å¸®åŠ©ä¿¡æ¯

```bash
./src/tf_tools/tf_publisher.sh --help
```

è¾“å‡ºï¼š
```
ç”¨æ³•ï¼štf_publisher.sh [æ¨¡å¼] [é€‰é¡¹]

æ¨¡å¼ï¼š
  (é»˜è®¤) æ— å‚æ•°ï¼šåŒæ—¶å¯åŠ¨é™æ€å’ŒåŠ¨æ€ TF å‘å¸ƒï¼ˆå‰å°é˜»å¡ï¼‰
  --daemon / --startï¼šåå°å¯åŠ¨é™æ€å’ŒåŠ¨æ€ TF å‘å¸ƒ
  --stopï¼šåœæ­¢æ‰€æœ‰åå° TF è¿›ç¨‹ï¼ˆé™æ€+åŠ¨æ€ï¼‰
  --statusï¼šæŸ¥çœ‹æ‰€æœ‰ TF è¿›ç¨‹çŠ¶æ€
  --helpï¼šæ˜¾ç¤ºæ­¤å¸®åŠ©

é€‰é¡¹ï¼š
  --static-onlyï¼šä»…æ“ä½œé™æ€ TFï¼ˆworldåæ ‡ç³»ï¼‰
  --dynamic-onlyï¼šä»…æ“ä½œåŠ¨æ€ TFï¼ˆæœºå™¨äººå…³èŠ‚ï¼‰

åŠŸèƒ½è¯´æ˜ï¼š
  - é™æ€ TFï¼šå‘å¸ƒå›ºå®šçš„åæ ‡å˜æ¢ï¼ˆå¦‚ worldâ†’base_link, worldâ†’camera_linkï¼‰
  - åŠ¨æ€ TFï¼šæ ¹æ® joint_states å®æ—¶è®¡ç®—å¹¶å‘å¸ƒæœºå™¨äººå„é“¾æ¥çš„å˜æ¢
```

## ğŸ“‹ å®Œæ•´åŠŸèƒ½æ¸…å•

### 1. é™æ€ TF å‘å¸ƒ
- âœ… world â†’ base_link
- âœ… world â†’ camera_link
- âœ… å…¶ä»–å›ºå®šåæ ‡å˜æ¢ï¼ˆä» static_tf_config.yaml è¯»å–ï¼‰

### 2. åŠ¨æ€ TF å‘å¸ƒ
- âœ… base_link â†’ link_1ï¼ˆæ ¹æ® joint1ï¼‰
- âœ… link_1 â†’ link_2ï¼ˆæ ¹æ® joint2ï¼‰
- âœ… link_2 â†’ link_3ï¼ˆæ ¹æ® joint3ï¼‰
- âœ… link_3 â†’ link_4ï¼ˆæ ¹æ® joint4ï¼‰
- âœ… link_4 â†’ link_5ï¼ˆæ ¹æ® joint5ï¼‰
- âœ… link_5 â†’ link_6ï¼ˆæ ¹æ® joint6ï¼‰

### 3. ç®¡ç†åŠŸèƒ½
- âœ… å‰å°/åå°è¿è¡Œåˆ‡æ¢
- âœ… è¿›ç¨‹çŠ¶æ€æŸ¥è¯¢
- âœ… ç»Ÿä¸€å¯åŠ¨/åœæ­¢
- âœ… åˆ†ç¦»å¼æ§åˆ¶ï¼ˆé™æ€/åŠ¨æ€ï¼‰
- âœ… æ—¥å¿—ç®¡ç†

## ğŸ”„ ä¸åŸç‰ˆæœ¬çš„å¯¹æ¯”

| é¡¹ç›® | åŸç‰ˆæœ¬ | å½“å‰ç‰ˆæœ¬ |
|------|--------|---------|
| å…¥å£è„šæœ¬åç§° | `static_tf_config_publish.sh` | `tf_publisher.sh` |
| åŠŸèƒ½ | ä»…é™æ€TF | é™æ€+åŠ¨æ€TF |
| ä»£ç ç»„ç»‡ | å¹³é“º | åˆ†å±‚ï¼ˆsrc/ç›®å½•ï¼‰|
| æ–‡æ¡£ | tf.md | README + IMPLEMENTATION + STRUCTURE |
| èŠ‚ç‚¹åç§° | - | `robot_tf_publisher` |

## ğŸ“ ä¿®æ”¹çš„æ–‡ä»¶åˆ—è¡¨

1. âœ… `static_tf_config_publish.sh` â†’ `tf_publisher.sh`ï¼ˆé‡å‘½åï¼‰
2. âœ… `tf_publisher.sh` - æ›´æ–°å¸®åŠ©ä¿¡æ¯
3. âœ… `README.md` - æ‰¹é‡æ›¿æ¢æ‰€æœ‰å¼•ç”¨
4. âœ… `IMPLEMENTATION.md` - æ‰¹é‡æ›¿æ¢æ‰€æœ‰å¼•ç”¨
5. âœ… `STRUCTURE.md` - æ‰¹é‡æ›¿æ¢æ‰€æœ‰å¼•ç”¨
6. âœ… `check_environment.sh` - æ‰¹é‡æ›¿æ¢æ‰€æœ‰å¼•ç”¨

## âœ¨ ä¼˜åŠ¿

1. **åç§°å‡†ç¡®**ï¼š`tf_publisher.sh` å‡†ç¡®åæ˜ åŠŸèƒ½ï¼ˆå‘å¸ƒTFï¼‰
2. **ç»“æ„æ¸…æ™°**ï¼šä»£ç é›†ä¸­åœ¨ `src/` ç›®å½•
3. **æ˜“äºç†è§£**ï¼šä»åç§°å°±èƒ½çœ‹å‡ºè¿™æ˜¯TFå‘å¸ƒçš„ç»Ÿä¸€å…¥å£
4. **åŠŸèƒ½å®Œæ•´**ï¼šåŒæ—¶æ”¯æŒé™æ€å’ŒåŠ¨æ€TF
5. **çµæ´»æ§åˆ¶**ï¼šå¯ä»¥ç‹¬ç«‹æ§åˆ¶é™æ€/åŠ¨æ€TF

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

- **èŠ‚ç‚¹åç§°**ï¼š`robot_tf_publisher`
- **è®¢é˜…è¯é¢˜**ï¼š`/joint_states`
- **å‘å¸ƒè¯é¢˜**ï¼š`/tf`ï¼ˆåŠ¨æ€ï¼‰+ `/tf_static`ï¼ˆé™æ€ï¼‰
- **URDFæ¥æº**ï¼š`src/description/urdf/yam.urdf`
- **æ—¥å¿—ä½ç½®**ï¼š`L2/log/tf_tools/robot_tf_publisher.log`
- **å‘å¸ƒé¢‘ç‡**ï¼š50Hzï¼ˆå¯é…ç½®ï¼‰

## ğŸ” éªŒè¯æ¸…å•

- [x] è„šæœ¬é‡å‘½åå®Œæˆ
- [x] æ‰€æœ‰æ–‡æ¡£å¼•ç”¨å·²æ›´æ–°
- [x] å¸®åŠ©ä¿¡æ¯å·²ä¼˜åŒ–
- [x] è·¯å¾„å¼•ç”¨æ­£ç¡®
- [x] ç›®å½•ç»“æ„æ¸…æ™°
- [x] åŠŸèƒ½æè¿°å‡†ç¡®

## ğŸ“š æ–‡æ¡£ç´¢å¼•

- **ç”¨æˆ·æŒ‡å—**ï¼š`README.md`
- **å®ç°ç»†èŠ‚**ï¼š`IMPLEMENTATION.md`
- **ç»“æ„è¯´æ˜**ï¼š`STRUCTURE.md`ï¼ˆæœ¬æ–‡æ¡£ï¼‰
- **åŸå§‹æ–‡æ¡£**ï¼š`tf.md`

## ğŸš¦ å¿«é€Ÿå¼€å§‹

```bash
# 1. ç¯å¢ƒæ£€æŸ¥
./src/tf_tools/check_environment.sh

# 2. åå°å¯åŠ¨ï¼ˆæ¨èï¼‰
./src/tf_tools/tf_publisher.sh --daemon

# 3. æŸ¥çœ‹çŠ¶æ€
./src/tf_tools/tf_publisher.sh --status

# 4. åœ¨ Foxglove ä¸­éªŒè¯æœºå™¨äººæ¨¡å‹æ˜¯å¦è·Ÿéšå…³èŠ‚è¿åŠ¨

# 5. æŸ¥çœ‹æ—¥å¿—ï¼ˆå¯é€‰ï¼‰
tail -f L2/log/tf_tools/robot_tf_publisher.log

# 6. åœæ­¢æœåŠ¡
./src/tf_tools/tf_publisher.sh --stop
```

---

**å®Œæˆæ—¶é—´**ï¼š2025-11-17
**ç‰ˆæœ¬**ï¼š2.0.0ï¼ˆé‡å‘½ååï¼‰
**çŠ¶æ€**ï¼šâœ… å®Œæˆå¹¶éªŒè¯
