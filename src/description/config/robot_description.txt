YAM 资源摘要
===========

基本文件
--------
- 主要 URDF: `yam.urdf`（复制自 `I2RT/i2rt/i2rt/robot_models/yam/yam.urdf`）
- MuJoCo 模型: `yam.xml`（复制自 `I2RT/i2rt/i2rt/robot_models/yam/yam.xml`）
- 网格资源目录: `assets/`（含 `base_link_*`, `link_1_*` … `link_6_*` STL）

关节参数速查（按 `joint1` → `joint6`）
-------------------------------------
- 轴向：全部在子链坐标系下标记为 `0 0 1`，结合 `<origin rpy>` 后得到的全局旋转轴如下：
  1. `joint1`：约 `[0, 0, +1]`
  2. `joint2`：约 `[+1, 0, 0]`
  3. `joint3`：约 `[0, 0, -1]`
  4. `joint4`：约 `[0, 0, +1]`
  5. `joint5`：约 `[0, +1, 0]`
  6. `joint6`：约 `[0, +1, 0]`
- 位置极限（单位 rad）：
  - `joint1`: [-2.61799, 3.13]
  - `joint2`: [0, 3.65]
  - `joint3`: [0, 3.13]
  - `joint4`: [-1.5708, 1.5708]
  - `joint5`: [-1.5708, 1.5708]
  - `joint6`: [-2.0944, 2.0944]
- 速度/力矩上限均为 `10`（URDF `<limit velocity="10" effort="10">`）

电机映射（参考 `i2rt/robots/get_robot.py`）
----------------------------------------
- `joint1` → 电机 ID `0x01`，型号 DM4340
- `joint2` → 电机 ID `0x02`，型号 DM4340
- `joint3` → 电机 ID `0x03`，型号 DM4340
- `joint4` → 电机 ID `0x04`，型号 DM4310
- `joint5` → 电机 ID `0x05`，型号 DM4310
- `joint6` → 电机 ID `0x06`，型号 DM4310
- 可选夹爪：电机 ID `0x07`，型号取决于所选 `GripperType`

电机参数（DM-J4310-2EC V1.1 / DM-J4340-2EC V1.1）
----------------------------------------------
- **DM-J4310-2EC V1.1（对应 `joint4`~`joint6`）**
  - 额定电压：24 V（部分版本 48 V）
  - 额定电流：2.5 A
  - 峰值电流：7.5 A
  - 相间电阻：650 mΩ
  - 相间电感：340 µH
  - 极对数：14 对
  - 扭矩常数：0.945 N·m/A
  - 转子惯量（电机端）：1.8 × 10⁻⁵ kg·m²
  - 重量：约 0.30 kg
  - 额定扭矩：3 N·m
  - 峰值扭矩：7 N·m
  - 额定转速：120 rpm（≈ 12.57 rad/s）
  - 最大转速（空载）：200 rpm（≈ 20.94 rad/s）
  - 减速比：10 : 1（内置谐波减速）
  - 外形尺寸：直径 57 mm × 长度 46 mm
- **DM-J4340-2EC V1.1（对应 `joint1`~`joint3`）**
  - 额定电压：24 V / 48 V
  - 额定电流：2.5 A（典型值）
  - 峰值电流：8 ~ 12.5 A
  - 相间电阻：760 mΩ
  - 相间电感：317 µH
  - 极对数：14 对
  - 扭矩常数：4.074 N·m/A
  - 转子惯量（电机端）：2.0 × 10⁻⁵ kg·m²
- 重量：约 0.36 kg
  - 额定扭矩：9 N·m
  - 峰值扭矩：27 N·m
  - 额定转速：36 rpm（≈ 3.77 rad/s）
  - 最大转速（空载）：52 rpm @ 24 V；100 rpm @ 48 V
  - 减速比：40 : 1（内置谐波减速）
  - 外形尺寸：直径 57 mm × 长度 53.3 mm

基座坐标假设
-----------
- 目前在 ROS2 节点中（`arm_state_publisher_position_mode.py`）默认发布 `world → base_link` 的静态 TF 为零位姿，即：
  - 平移 `(x, y, z) = (0, 0, 0)` 米
  - 四元数 `(w, x, y, z) = (1, 0, 0, 0)`
- 实际安装若存在偏移，待现场测量后更新；MoveIt 配置生成阶段可临时使用该默认值。

控制 / 通信参数（摘自 I2RT SDK）
-----------------------------
- `get_yam_robot()` 默认使用：
  - `gravity_comp_factor = 1.3`（启用重力补偿）
  - `kp = [80, 80, 80, 40, 10, 10]`，`kd = [5, 5, 5, 1.5, 1.5, 1.5]`
  - `ReceiveMode = ReceiveMode.p16`，`control_mode = ControlMode.MIT`
  - `zero_gravity_mode = True`（可选关闭）
  - `motor_offsets` 初始为 0，上电后按 ±2π 自动校正至最近位置
  - 含夹爪时附加 `gripper_kp` / `gripper_kd`（DM4310/DM3507 由 `GripperType` 决定），并限制夹爪输出力 `limit_gripper_force = 50.0`
  - `joint_limits` 在 SDK 内部额外扩展 ±0.15 rad 缓冲；MoveIt 可按硬件真实限位（见上节）配置
- 通信：
  - `DMChainCanInterface` 连接 `socketcan` 通道 `can0/can1/can2`，默认关闭内部读线程（`start_thread=False`）
  - 若使用教学手柄，会在同一总线上追加被动编码器读取（`get_same_bus_device_driver = get_encoder_chain`）
- 安全/超时：
  - 工厂默认启用 400 ms 通讯超时，超时后电机进入阻尼模式（可用 `i2rt/motor_config_tool/set_timeout.py` 调整）
  - `motor_chain_robot.py` 节点默认 50 Hz 发布 `/joint_states`；可根据需要调整

CAN / 驱动要点
-------------
- SDK 默认使用 `socketcan`，通道命名为 `can0/can1/can2`。
- 官方启动脚本 `start_yam.sh` 以 `can1` 为例，速率 `1 Mbps`，需先加载 `gs_usb` 模块。
- `gs_usb_arm64_fix` 提供 `80-can-usb.rules`，可在插入 USB-CAN 适配器时自动 bring-up `can1/can2`。

后续补充建议
-------------
- 根据实机电机规格补充速度、加速度、力矩等限值，替换 URDF 默认数值。
- 若获得实际零点偏置，可更新 ROS2 硬件接口或新建配置文件归档于此目录。
